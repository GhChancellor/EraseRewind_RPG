---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by lele.
--- DateTime: 15/04/23 18:54
---

---@class CharacterTrait

local CharacterTrait = {}

local characterLib = require("CharacterLib")
local characterPz = require("lib/CharacterPZ")
local pageBook = require("PageBook")
local modDataManager = require("lib/ModDataManager")

require("lib/CharacterBaseObj")
---Read Trait From Hd
---@return table
local function readTraitFromHd()
    return modDataManager.read(pageBook.Character.TRAITS)
end

--- **Create Trait**
---@param character IsoGameCharacter
--- - zombie.characters.IsoGameCharacter
function CharacterTrait.readBook(character)
    if not modDataManager.isExists(pageBook.Character.TRAITS) then
        return nil
    end

    ---@type table
    ---@return string
    local traits = {}
    traits = readTraitFromHd(character)

    if not traits then
        return nil
    end

    characterPz.removeAllTraits_PZ(character)

    for _, v in pairs(traits) do

        ---@param character IsoGameCharacter
        ---@param trait string
        characterPz.setTraitsPerk_PZ(character, v)
    end
end

--- **Write Trait To Hd**
---@param character IsoGameCharacter
--- - zombie.characters.IsoGameCharacter
function CharacterTrait.writeBook(character)
    modDataManager.remove(pageBook.Character.TRAITS)

    ---@type CharacterBaseObj
    local trait = CharacterBaseObj:new()
    trait = characterLib.getTraitsPerk(character)

    modDataManager.save(pageBook.Character.TRAITS,
            trait:getTraits())
end

return CharacterTrait