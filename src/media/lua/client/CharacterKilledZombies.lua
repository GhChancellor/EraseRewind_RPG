---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by lele.
--- DateTime: 15/04/23 18:54
---

---@class CharacterKilledZombies

local CharacterKilledZombies = {}

local characterPz = require("lib/CharacterPZ")
local pageBook = require("PageBook")
local modDataManager = require("lib/ModDataManager")

--- **Read Zombies Killed From Hd**
---@return table int ( killed zombies )
local function readKilledZombiesFromHd()
    return modDataManager.read(pageBook.Character.KILLED_ZOMBIES)
end

--- **Create Zombies Kills**
---@param character IsoGameCharacter
--- - IsoGameCharacter : zombie.characters.IsoGameCharacter
function CharacterKilledZombies.readBook(character)
    --- **Check if moddata killedZombies is exits**
    if not modDataManager.isExists(pageBook.Character.KILLED_ZOMBIES) then
        return nil
    end

    ---@type table
    ---@return int ( killed zombies )
    local killedZombies = readKilledZombiesFromHd()

    for i, v in pairs(killedZombies) do
        characterPz.setZombieKills_PZ(character, v)
    end

end

--- **Write Zombies Kills To Hd**
---@param character IsoGameCharacter
--- - IsoGameCharacter : zombie.characters.IsoGameCharacter
function CharacterKilledZombies.writeBook(character)
    --- **Remove Killed Zombies form moddata**
    modDataManager.remove(pageBook.Character.KILLED_ZOMBIES)

    ---@type table int ( killed zombies )
    local killedZombies = {}
    table.insert(killedZombies, characterPz.getZombieKills_PZ(character))

    modDataManager.save(pageBook.Character.KILLED_ZOMBIES,
            killedZombies)

end

return CharacterKilledZombies