-----
----- Generated by EmmyLua(https://github.com/EmmyLua)
----- Created by lele.
----- DateTime: 12/10/23 20:51
-----
--
--require "ISUI/ISInventoryPaneContextMenu"
--local characterManagement = require("CharacterManagement")
--local debugDiagnostics = require("lib/DebugDiagnostics")
--
-----@type string
--local readBook = {
--    ReadOnceBookJournal = "ReadOnceBookJournal",
--    TimedBookJournal = "TimedBookJournal"
--}
--
----- **Save player**
-----@param item InventoryItem
-----@param character IsoGameCharacter
-----@return void
--local function onSavePlayer(item, character)
--    ---@type string
--    local openBook = "OpenBook"
--
--    ---@type string
--    local closeBook = "CloseBook"
--
--    -- TODO : add translation
--    local writtenBookDBG = "Written Book"
--
--    --- **Play sound**
--    character:playSound(openBook)
--
--    --- **Write moddata - Character stats **
--    characterManagement.writeBook(character)
--
--    --- **Add player name to read Once Book journal**
--    item:setName(item:getName() .. " - " .. character:getFullName() )
--
--    --- **Say message**
--    character:Say(writtenBookDBG)
--
--    --- **Play sound**
--    character:playSound(closeBook)
--end
--
----- **Write book**
-----@param context ISInventoryPaneContextMenu
-----@param items InventoryItem
-----@return void
--local function addSaveContext(character, context, items)
--    -- TODO : add translation
--    ---@type string
--    local textMessageDBG = "Transcribe"
--
--    ---@type InventoryItem
--    local item
--
--    ---@type IsoGameCharacter
--    local character = debugDiagnostics.characterUpdate()
--
--    for _, v in ipairs(items) do
--        if not instanceof(v, "InventoryItem") then
--            item = v.items[1]
--        end
--
--        if item:getType() == readBook[item:getType()]  then
--            -- **Add option ( text ) to context
--            context:addOption(textMessageDBG, item, onSavePlayer, character)
--        end
--    end
--end
--
--
--Events.OnPreFillInventoryObjectContextMenu.Add(addSaveContext)